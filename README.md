# Deploying-a-Lambda-Function
I created an AWS Lambda function and configured an event notification for Amazon Simple Storage Service (Amazon S3).

 <h2>Description</h2> 
 I created an AWS Lambda function that resizes an uploaded image to create a thumbnail. I then configured an event notification in Amazon S3 to trigger the Lambda function whenever an image is uploaded. The function processes the original image, resizes it into a thumbnail, and saves it in a target S3 bucket. Finally, I monitored the Lambda function's performance and logged events using Amazon CloudWatch.<br /> 
 
 <h2>Languages and Utilities Used</h2> 
 
- <b> Amazon S3: </b> Amazon S3 is an object storage service that offers industry-leading scalability, data availability, security, and performance. It stores and protect any amount of data for a range of use cases, such as data lakes, websites, built-for-the-cloud applications, backups, archives, machine learning, and analytics.<br />
- <b> IAM: </b> AWS Identity and Access Management (IAM) is a web service that helps you securely control access to AWS resources. With IAM, you can centrally manage permissions that control which AWS resources users can access. You use IAM to control who is authenticated (signed in) and authorized (has permissions) to use resources.<br />
- <b> AWS Lambda: </b> AWS Lambda is a compute service that lets you run code without provisioning or managing servers. Lambda runs your code on a high availability compute infrastructure and performs the administration of the compute resources, including server and operating system maintenance, capacity provisioning and automatic scaling, and logging. With Lambda, all you need to do is supply your code in one of the language runtimes that Lambda supports.<br />
- <b> AWS CloudWatch: </b> AWS CloudWatch is a monitoring and observability service provided by AWS that allows you to monitor your AWS resources and the applications you run on AWS in real time. It collects and tracks metrics, which are variables you can measure for your resources and applications, providing system-wide visibility into resource utilization, application performance, and operational health.
has context menu 
 
 <h2>Environments Used </h2>
 
  <b>Cloud Platform:
  AWS (Amazon Web Services): This project was conducted entirely in AWS, utilizing several of its services. 
  </b> 
  <h2>Program walk-through:</h2> 
  
  <p align="center"> 
    
The following diagram depicts the basic architecture of application flow.
 
<br/>

![Figure 1](https://i.imgur.com/uBiG1UT.png)
 
<i>Figure 1: The diagram illustrates a user uploading an object to the source bucket in Amazon S3 (object-created event). Amazon S3 detects the object-created event and publishes the event to AWS Lambda by invoking the Lambda function and passing event data as a function parameter. AWS Lambda runs the Lambda function. From the event data it receives, the Lambda function knows the source bucket name and object key name. The Lambda function reads the object and creates a thumbnail using graphics libraries, then saves the thumbnail to the target bucket..</i>
<br />
<br />
<br />

In this project, I set up image storage and processing by creating two Amazon S3 (Simple Storage Service) buckets:

A source bucket to store the original image.
A target bucket to store the resized thumbnail image generated by an AWS Lambda function.

To create the buckets, I accessed the AWS Management Console, searched for S3, and selected it. Then, I clicked Create bucket to begin the setup.

The first bucket, the source bucket, was created to store the original uploaded images. The second bucket, the target bucket, was designed to store resized thumbnail images after processing by the Lambda function.

Since S3 bucket names must be globally unique, I followed proper naming conventions. The generic names images and images-resized were unavailable, so I appended a unique identifier to ensure uniqueness:

Source bucket: resterimages-123456

Target bucket: resterimages-resized123456

This setup ensures seamless image processing and storage within AWS.

<br/>

![S3 Buckets](https://i.imgur.com/RdlJDJs.png)

The next step involved uploading an image for testing using the Amazon S3 Console to add a file to the source bucket.

I selected HappyFace.jpg and saved it to my computer, then, I accessed the Amazon S3 Console, opened the source bucket (resterimages-123456789), and clicked Upload.

In the Upload window, I clicked Add files, selected HappyFace.jpg, and initiated the upload.  Once the upload was complete, an "Upload succeeded" message appeared at the top of the page, confirming that the file was successfully uploaded.

<br/>

![S3 Buckets](https://i.imgur.com/S1S2ftp.png)

To automate image processing, a Lambda function is configured with an Amazon S3 trigger, enabling it to execute whenever a new object is uploaded to the source S3 bucket.

I created the Lambda Function
Open the AWS Management Console, search for Lambda, and select it, click create function.
On the Create function page, select Author from scratch, in the Basic information section, configure the following:

Function name: Create-Thumbnail
Runtime: Select Python 3.9 from the available options.
Expand Change default execution role and choose:
Execution role: Use an existing role
Existing role: lambda-execution-role (Grants permission to read and write images in S3 buckets.), click create function.

Once the function is successfully created, a "Successfully created the function" message appears at the top of the page.

<br/>

![S3 Buckets](https://i.imgur.com/y4msl5c.png)

<br/>

![S3 Buckets](https://i.imgur.com/ho14x4N.png)


The following diagram depicts the basic architecture of the lab environment. The resources depicted in the diagram already exist in your Amazon Web Services (AWS) account when you start the lab. <br/> ![Figure 1](https://github.com/user-attachments/assets/a04afe38-bd83-4a8c-9480-0f03c0caffd5) <i>Figure 1: The diagram illustrates a website developer working in an AWS Cloud environment using an AWS Cloud9 IDE hosted on an Amazon Elastic Compute Cloud (Amazon EC2) instance. The instance is set up in a security-controlled public subnet of a virtual private cloud (VPC) and is accessible over the internet. The hosted website is available to consumers through the Apache HTTP Server running on the EC2 instance. For more information, refer to the following detailed diagram overview.</i> <br /> <br /> <br /> My first step was connecting to AWS Cloud 9 IDE. After connecting to the Cloud 9 environment I verified that the web server was running by using the following command: <b> sudo systemctl status apache2</b>. ![Verify Apache Server Working](https://github.com/user-attachments/assets/bbe078dc-6376-4ec1-b8ba-84799b14f32f) <br /> I wanted to observe the web server document root directory and contents. To discover the default web server DocumentRoot location, I ran the following command: <b> cat /etc/apache2/sites-available/000-default.conf</b>. In the web serverâ€™s configuration file, webpages are served to users from the default directory /var/www/html. To list the contents of the default directory, you can run the following command: <b> ls /var/www/html</b>. ![Document Root location](https://github.com/user-attachments/assets/22448fd9-25f4-4fc7-a62f-d047cca98a92) <br /> To retrieve the IPv4 public IP address of the instance AWS Cloud9 is running on, run this command: <b> curl 169.254.169.254/latest/meta-data/public-ipv4</b>. You will use this public IP address to load the webpage. ![Retrieve IP Address to load webpage](https://github.com/user-attachments/assets/81c30c1b-7eab-4a6d-a354-a4473d678f22) <br /> The webpage would not load for me. <br/> ![Unable to load webpage](https://github.com/user-attachments/assets/fc3791eb-6776-4385-bcfb-fe2fc6ef6105) <br /> I began troubleshooting. I wanted to check for connectivity issues so I started checking for any network issues. I looked at the security group rules. The security group acts as a virtual firewall. When I checked the inbound rules I noticed there was no rule to allow traffic from the internet. ![Instance Inbound Rules](https://github.com/user-attachments/assets/b47ef338-c2e4-45ba-91b6-75e97eb0e990) <br /> I added an inbound rule to allow all traffic from any IP address. ![Updated inbound rules](https://github.com/user-attachments/assets/0e8f4572-969a-4639-bbe2-6a8d6c3bc345) <br /> I reloaded the webpage after my configuration changes. It was successful this time. ![Successfully loaded webpage](https://github.com/user-attachments/assets/0947084f-eea7-4eee-939e-ad14f1f82cc2) <br /> I moved the existing index.html file to a backup location. To do this: Return to the AWS Cloud9 Bash terminal, and run the following command: <b> sudo mv /var/www/html/index.html /var/tmp/</b>. I tried to reload the webpage after making these changes, but the page would not load. ![No files in Root location](https://github.com/user-attachments/assets/92144ab3-8f4b-4fc0-a23a-547ecd74b64a) <i>Figure 2: This message is displayed because there are currently no files in the DocumentRoot location.</i> <br /> I configured the AWS Cloud9 IDE environment window to show the web server document root. To do so, in the AWS Cloud9 Bash terminal, run the following commands: <b> ln -s /var/www/ /home/ubuntu/environment/www sudo chown -R ubuntu /var/www/</b>. The first command created a symlink to the /var/www directory in your environment directory. The second command changed ownership of the files in the /var/www directory so the ubuntu user (which is you) can edit the files in this www directory. If you want, you can verify the user by running whoami. ![Configure root directory](https://github.com/user-attachments/assets/a2bd39a4-98ff-488f-807f-0b75c87e2a58) <br /> I began creating a <span zeum4c20="PR_1_0" data-ddnwab="PR_1_0" aria-invalid="grammar" class="Lm ng">webpage</span> for "Anycompany Bicycle parts". I was so proud of myself for getting the header to display that I deviated from the project. Here is a temporary message where I'm asking for a job. ![Successful webpage](https://github.com/user-attachments/assets/576b59f4-0434-4933-a737-fcd9fbcef71a) Now it's time to get back on track. I added some heading and paragraph elements. I was able to add hyperlinks to jump to different sections in my webpage. Additionally, I was able to open links in a different <span zeum4c20="PR_2_0" data-ddnwab="PR_2_0" aria-invalid="spelling" class="LI ng">browswer</span> from my webpage. I added a target attribute and gave it the value of "_blank." I added an HTML entity as well. I figured out how to include the copyright symbol. It can be achieved by typing: <b><p>&copy; </b>. Below you will see a snippet of my HTML code. ![HTML code](https://github.com/user-attachments/assets/be5b5706-5f3a-43f1-a119-17471606231e) <br /> Finally I completed my webpage. It turned out better than I expected. ![Completed Webpage](https://github.com/user-attachments/assets/de1a58fb-1875-431d-a32f-35b14e18a029) <br/> <h2>Summary</h2> The project commenced with the verification of the Apache2 web server's status in AWS Cloud9. Upon encountering networking issues that hindered webpage loading, I implemented troubleshooting steps to resolve them, facilitating access to the default Apache2 page. Subsequently, I backed up the existing index.html file, adjusted the AWS Cloud9 environment settings to properly display the document root, and created a new webpage incorporating hyperlinks, an HTML entity, and a favicon. This project gave me the confidence and skills to create webpages. I'm using the knowledge I gained to go back and enhance the repositories of my previous projects. I learned how to use features like, bold and italicize text. These changes help to visually enhance my work. I will be adding to this website in the future. <br /></div>
